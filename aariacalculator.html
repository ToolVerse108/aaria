<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AARIA's Ultimate Plot Investment ROI Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 30px;
        }
        
        .section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .section h2 {
            color: #2a5298;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
            margin-top: 20px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .results {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .results h2 {
            color: #1e3c72;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .result-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .result-card h3 {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        
        .result-card .value {
            color: #2a5298;
            font-size: 2em;
            font-weight: bold;
        }
        
        .result-card.positive .value {
            color: #27ae60;
        }
        
        .result-card.negative .value {
            color: #e74c3c;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 12px 24px;
            background: #e0e0e0;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .insight-box {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
        }
        
        .insight-box.success {
            background: #d4edda;
            border-left-color: #28a745;
        }
        
        .insight-box.danger {
            background: #f8d7da;
            border-left-color: #dc3545;
        }
        
        .chart-container {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 12px;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚úÖ AARIA'S ULTIMATE PLOT INVESTMENT ROI CALCULATOR</h1>
            <p>Your Total Market-Minded Calculator for Indian Plot Investments</p>
        </div>
        
        <div class="tabs" style="padding: 20px 30px 0;">
            <button class="tab active" onclick="switchTab('basic')">Basic Inputs</button>
            <button class="tab" onclick="switchTab('holding')">Holding Costs</button>
            <button class="tab" onclick="switchTab('growth')">Growth Forecast</button>
            <button class="tab" onclick="switchTab('exit')">Exit Strategy</button>
            <button class="tab" onclick="switchTab('risk')">Risk Analysis</button>
        </div>
        
        <div class="main-content">
            <!-- Tab 1: Basic Investment Inputs -->
            <div id="basic" class="tab-content active" style="grid-column: 1 / -1;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div class="section">
                        <h2>üèóÔ∏è Plot Details</h2>
                        <div class="form-group">
                            <label>Purchase Price (‚Çπ)</label>
                            <input type="number" id="purchasePrice" value="5000000">
                        </div>
                        <div class="form-group">
                            <label>Plot Size</label>
                            <input type="number" id="plotSize" value="1000">
                        </div>
                        <div class="form-group">
                            <label>Unit</label>
                            <select id="plotUnit">
                                <option value="sqft">Square Feet</option>
                                <option value="sqyard">Square Yards</option>
                                <option value="sqmeter">Square Meters</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Circle Rate (‚Çπ per unit)</label>
                            <input type="number" id="circleRate" value="4500">
                        </div>
                    </div>
                    
                    <div class="section">
                        <h2>üí∞ Purchase Costs</h2>
                        <div class="form-group">
                            <label>State</label>
                            <select id="state">
                                <option value="up">Uttar Pradesh (7%)</option>
                                <option value="mh">Maharashtra (5%)</option>
                                <option value="dl">Delhi (6%)</option>
                                <option value="ka">Karnataka (5%)</option>
                                <option value="tn">Tamil Nadu (7%)</option>
                                <option value="rj">Rajasthan (6%)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Registration Cost (‚Çπ)</label>
                            <input type="number" id="registrationCost" value="10000">
                        </div>
                        <div class="form-group">
                            <label>GST Applicable?</label>
                            <select id="gstApplicable">
                                <option value="no">No</option>
                                <option value="yes">Yes (18%)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Brokerage (%)</label>
                            <input type="number" id="brokerage" value="1" step="0.1" min="0" max="3">
                        </div>
                        <div class="form-group">
                            <label>Lawyer/Consultancy Fees (‚Çπ)</label>
                            <input type="number" id="lawyerFees" value="25000">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tab 2: Holding Costs -->
            <div id="holding" class="tab-content" style="grid-column: 1 / -1;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div class="section">
                        <h2>üè¶ Loan Details</h2>
                        <div class="form-group">
                            <label>Taking Loan?</label>
                            <select id="loanTaken" onchange="toggleLoanFields()">
                                <option value="no">No</option>
                                <option value="yes">Yes</option>
                            </select>
                        </div>
                        <div id="loanFields" style="display: none;">
                            <div class="form-group">
                                <label>Loan Amount (‚Çπ)</label>
                                <input type="number" id="loanAmount" value="3000000">
                            </div>
                            <div class="form-group">
                                <label>Interest Rate (% p.a.)</label>
                                <input type="number" id="interestRate" value="9.5" step="0.1">
                            </div>
                            <div class="form-group">
                                <label>Loan Tenure (years)</label>
                                <input type="number" id="loanTenure" value="10">
                            </div>
                            <div class="form-group">
                                <label>Processing Charges (‚Çπ)</label>
                                <input type="number" id="processingCharges" value="30000">
                            </div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h2>üìÖ Annual Holding Costs</h2>
                        <div class="form-group">
                            <label>Annual Property Tax (‚Çπ)</label>
                            <input type="number" id="propertyTax" value="5000">
                        </div>
                        <div class="form-group">
                            <label>Annual Maintenance (‚Çπ)</label>
                            <input type="number" id="maintenance" value="12000">
                        </div>
                        <div class="form-group">
                            <label>Opportunity Cost (% p.a.)</label>
                            <input type="number" id="opportunityCost" value="8" step="0.1">
                        </div>
                        <div class="form-group">
                            <label>Inflation Rate (%)</label>
                            <input type="number" id="inflationRate" value="6" step="0.1">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tab 3: Growth Forecast -->
            <div id="growth" class="tab-content" style="grid-column: 1 / -1;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div class="section">
                        <h2>üìà Market Growth</h2>
                        <div class="form-group">
                            <label>Historical Growth Rate (% p.a.)</label>
                            <input type="number" id="historicalGrowth" value="12" step="0.1">
                        </div>
                        <div class="form-group">
                            <label>Forecasted Growth Rate (% p.a.)</label>
                            <input type="number" id="forecastedGrowth" value="15" step="0.1">
                        </div>
                        <div class="form-group">
                            <label>Growth Model</label>
                            <select id="growthModel">
                                <option value="linear">Linear Growth</option>
                                <option value="compound">Compound Growth</option>
                                <option value="momentum">Momentum-Based</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h2>üèóÔ∏è Infrastructure Impact</h2>
                        <div class="form-group">
                            <label>Metro/Expressway Proximity</label>
                            <select id="metroProximity">
                                <option value="1">None (0% impact)</option>
                                <option value="1.05">Planned (5% boost)</option>
                                <option value="1.15">Under Construction (15% boost)</option>
                                <option value="1.25">Operational (25% boost)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Industrial Corridor</label>
                            <select id="industrialCorridor">
                                <option value="1">No Impact</option>
                                <option value="1.1">Low Impact (10%)</option>
                                <option value="1.2">Medium Impact (20%)</option>
                                <option value="1.3">High Impact (30%)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Commercial Development Score</label>
                            <select id="commercialDev">
                                <option value="1">Low</option>
                                <option value="1.1">Medium</option>
                                <option value="1.2">High</option>
                                <option value="1.3">Very High</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tab 4: Exit Strategy -->
            <div id="exit" class="tab-content" style="grid-column: 1 / -1;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div class="section">
                        <h2>üéØ Exit Planning</h2>
                        <div class="form-group">
                            <label>Holding Period (years)</label>
                            <input type="number" id="holdingPeriod" value="5" min="1" max="30">
                        </div>
                        <div class="form-group">
                            <label>Quick Sale Discount (%)</label>
                            <input type="number" id="quickSaleDiscount" value="10" step="1">
                        </div>
                        <div class="form-group">
                            <label>Capital Gains Tax (%)</label>
                            <select id="capitalGainsTax">
                                <option value="20">Long Term (20%)</option>
                                <option value="30">Short Term (30%)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h2>üèóÔ∏è Construction Plan (Optional)</h2>
                        <div class="form-group">
                            <label>Plan to Construct?</label>
                            <select id="planConstruct" onchange="toggleConstructionFields()">
                                <option value="no">No</option>
                                <option value="yes">Yes</option>
                            </select>
                        </div>
                        <div id="constructionFields" style="display: none;">
                            <div class="form-group">
                                <label>Construction Cost (‚Çπ)</label>
                                <input type="number" id="constructionCost" value="2000000">
                            </div>
                            <div class="form-group">
                                <label>Expected Monthly Rent (‚Çπ)</label>
                                <input type="number" id="monthlyRent" value="25000">
                            </div>
                            <div class="form-group">
                                <label>Vacancy Rate (%)</label>
                                <input type="number" id="vacancyRate" value="10" step="1">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tab 5: Risk Analysis -->
            <div id="risk" class="tab-content" style="grid-column: 1 / -1;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div class="section">
                        <h2>‚ö†Ô∏è Market Risks</h2>
                        <div class="form-group">
                            <label>Price Stagnation Risk</label>
                            <select id="stagnationRisk">
                                <option value="0">Low (0% probability)</option>
                                <option value="0.25">Medium (25% probability)</option>
                                <option value="0.5">High (50% probability)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Infrastructure Delay Risk</label>
                            <select id="infraDelayRisk">
                                <option value="1">No Risk</option>
                                <option value="0.9">Low Risk (10% reduction)</option>
                                <option value="0.7">High Risk (30% reduction)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h2>üìã Legal Readiness</h2>
                        <div class="form-group">
                            <label>Documentation Grade</label>
                            <select id="docGrade">
                                <option value="1.1">Grade A (Premium +10%)</option>
                                <option value="1">Grade B (Standard)</option>
                                <option value="0.9">Grade C (Risky -10%)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>NOC Status</label>
                            <select id="nocStatus">
                                <option value="1.05">All NOCs Available (+5%)</option>
                                <option value="1">Partial NOCs</option>
                                <option value="0.95">No NOCs (-5%)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Bank Loan Approved?</label>
                            <select id="bankApproved">
                                <option value="1.05">Yes (+5% value)</option>
                                <option value="0.95">No (-5% value)</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="btn" onclick="calculateROI()" style="grid-column: 1 / -1;">üöÄ Calculate My Investment Returns</button>
            
            <!-- Results Section -->
            <div id="resultsSection" class="results" style="display: none;">
                <h2>üìä Your Investment Analysis Report</h2>
                
                <div class="results-grid">
                    <div class="result-card">
                        <h3>Total Investment</h3>
                        <div class="value" id="totalInvestment">‚Çπ0</div>
                    </div>
                    <div class="result-card positive">
                        <h3>Expected Value</h3>
                        <div class="value" id="expectedValue">‚Çπ0</div>
                    </div>
                    <div class="result-card positive">
                        <h3>Net Profit</h3>
                        <div class="value" id="netProfit">‚Çπ0</div>
                    </div>
                    <div class="result-card">
                        <h3>ROI (%)</h3>
                        <div class="value" id="roiPercent">0%</div>
                    </div>
                    <div class="result-card">
                        <h3>CAGR (%)</h3>
                        <div class="value" id="cagr">0%</div>
                    </div>
                    <div class="result-card">
                        <h3>Profit per Sq Ft</h3>
                        <div class="value" id="profitPerSqft">‚Çπ0</div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3 style="margin-bottom: 15px;">üìà Investment Performance Score</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="performanceScore" style="width: 0%">0%</div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div class="insight-box success">
                        <h3 style="margin-bottom: 10px;">‚úÖ Top 3 Reasons to Invest</h3>
                        <ul id="proslist" style="margin-left: 20px; line-height: 1.8;"></ul>
                    </div>
                    <div class="insight-box danger">
                        <h3 style="margin-bottom: 10px;">‚ö†Ô∏è Top 3 Risk Factors</h3>
                        <ul id="conslist" style="margin-left: 20px; line-height: 1.8;"></ul>
                    </div>
                </div>
                
                <div class="insight-box" style="margin-top: 20px;">
                    <h3 style="margin-bottom: 10px;">üéØ AARIA's Best Buy Score</h3>
                    <div style="font-size: 1.5em; font-weight: bold; color: #2a5298;" id="bestBuyScore">0/100</div>
                    <p id="scoreInsight" style="margin-top: 10px;"></p>
                </div>
                
                <div class="insight-box" style="margin-top: 20px; background: #ffe5e5; border-left-color: #dc3545;">
                    <h3 style="margin-bottom: 10px;">üò∞ Panic-Proof Mode: Worst Case Scenario</h3>
                    <p><strong>If everything goes wrong:</strong></p>
                    <ul style="margin: 10px 0 10px 20px; line-height: 1.8;">
                        <li>No infrastructure development</li>
                        <li>Economic downturn (price drop 20%)</li>
                        <li>Interest rates rise</li>
                        <li>Distress sale situation</li>
                    </ul>
                    <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 8px;">
                        <strong>Worst Case Net Position:</strong>
                        <div style="font-size: 1.8em; font-weight: bold; color: #dc3545; margin-top: 10px;" id="worstCase">‚Çπ0</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }
        
        function toggleLoanFields() {
            const loanTaken = document.getElementById('loanTaken').value;
            document.getElementById('loanFields').style.display = loanTaken === 'yes' ? 'block' : 'none';
        }
        
        function toggleConstructionFields() {
            const planConstruct = document.getElementById('planConstruct').value;
            document.getElementById('constructionFields').style.display = planConstruct === 'yes' ? 'block' : 'none';
        }
        
        function calculateROI() {
            const purchasePrice = parseFloat(document.getElementById('purchasePrice').value) || 0;
            const plotSize = parseFloat(document.getElementById('plotSize').value) || 1;
            const registrationCost = parseFloat(document.getElementById('registrationCost').value) || 0;
            const lawyerFees = parseFloat(document.getElementById('lawyerFees').value) || 0;
            const brokerage = parseFloat(document.getElementById('brokerage').value) || 0;
            
            const state = document.getElementById('state').value;
            const stampDutyRates = {up: 0.07, mh: 0.05, dl: 0.06, ka: 0.05, tn: 0.07, rj: 0.06};
            const stampDuty = purchasePrice * stampDutyRates[state];
            
            const gstApplicable = document.getElementById('gstApplicable').value === 'yes';
            const gst = gstApplicable ? purchasePrice * 0.18 : 0;
            
            const brokerageCost = purchasePrice * (brokerage / 100);
            
            let totalInvestment = purchasePrice + stampDuty + registrationCost + gst + brokerageCost + lawyerFees;
            
            const loanTaken = document.getElementById('loanTaken').value === 'yes';
            let totalLoanCost = 0;
            
            if (loanTaken) {
                const loanAmount = parseFloat(document.getElementById('loanAmount').value) || 0;
                const interestRate = parseFloat(document.getElementById('interestRate').value) || 0;
                const loanTenure = parseFloat(document.getElementById('loanTenure').value) || 1;
                const processingCharges = parseFloat(document.getElementById('processingCharges').value) || 0;
                
                const monthlyRate = (interestRate / 100) / 12;
                const months = loanTenure * 12;
                const emi = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, months) / (Math.pow(1 + monthlyRate, months) - 1);
                const totalInterest = (emi * months) - loanAmount;
                totalLoanCost = totalInterest + processingCharges;
                totalInvestment += processingCharges;
            }
            
            const propertyTax = parseFloat(document.getElementById('propertyTax').value) || 0;
            const maintenance = parseFloat(document.getElementById('maintenance').value) || 0;
            const holdingPeriod = parseFloat(document.getElementById('holdingPeriod').value) || 5;
            const inflationRate = parseFloat(document.getElementById('inflationRate').value) || 6;
            
            let totalHoldingCost = 0;
            for (let i = 1; i <= holdingPeriod; i++) {
                const yearCost = (propertyTax + maintenance) * Math.pow(1 + inflationRate / 100, i - 1);
                totalHoldingCost += yearCost;
            }
            
            if (loanTaken) {
                const loanAmount = parseFloat(document.getElementById('loanAmount').value) || 0;
                const interestRate = parseFloat(document.getElementById('interestRate').value) || 0;
                const loanTenure = parseFloat(document.getElementById('loanTenure').value) || 1;
                const monthlyRate = (interestRate / 100) / 12;
                const months = Math.min(loanTenure * 12, holdingPeriod * 12);
                const emi = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, months) / (Math.pow(1 + monthlyRate, months) - 1);
                totalHoldingCost += emi * months - loanAmount;
            }
            
            totalInvestment += totalHoldingCost;
            
            const forecastedGrowth = parseFloat(document.getElementById('forecastedGrowth').value) || 0;
            const metroProximity = parseFloat(document.getElementById('metroProximity').value) || 1;
            const industrialCorridor = parseFloat(document.getElementById('industrialCorridor').value) || 1;
            const commercialDev = parseFloat(document.getElementById('commercialDev').value) || 1;
            const docGrade = parseFloat(document.getElementById('docGrade').value) || 1;
            const nocStatus = parseFloat(document.getElementById('nocStatus').value) || 1;
            const bankApproved = parseFloat(document.getElementById('bankApproved').value) || 1;
            const infraDelayRisk = parseFloat(document.getElementById('infraDelayRisk').value) || 1;
            
            const infrastructureMultiplier = metroProximity * industrialCorridor * commercialDev * infraDelayRisk;
            const legalMultiplier = docGrade * nocStatus * bankApproved;
            const adjustedGrowth = forecastedGrowth * infrastructureMultiplier * legalMultiplier;
            
            const growthModel = document.getElementById('growthModel').value;
            let expectedValue = purchasePrice;
            
            if (growthModel === 'linear') {
                expectedValue = purchasePrice * (1 + (adjustedGrowth / 100) * holdingPeriod);
            } else if (growthModel === 'compound') {
                expectedValue = purchasePrice * Math.pow(1 + adjustedGrowth / 100, holdingPeriod);
            } else {
                const momentum = 1.1;
                expectedValue = purchasePrice * Math.pow(1 + (adjustedGrowth * momentum) / 100, holdingPeriod);
            }
            
            const capitalGainsTax = parseFloat(document.getElementById('capitalGainsTax').value) || 20;
            const capitalGains = expectedValue - purchasePrice;
            const taxAmount = capitalGains * (capitalGainsTax / 100);
            
            const netProfit = expectedValue - totalInvestment - taxAmount;
            const roiPercent = (netProfit / totalInvestment) * 100;
            const cagr = (Math.pow(expectedValue / totalInvestment, 1 / holdingPeriod) - 1) * 100;
            
            const plotSizeInSqft = plotSize * (document.getElementById('plotUnit').value === 'sqyard' ? 9 : document.getElementById('plotUnit').value === 'sqmeter' ? 10.764 : 1);
            const profitPerSqft = netProfit / plotSizeInSqft;
            
            document.getElementById('totalInvestment').textContent = '‚Çπ' + totalInvestment.toLocaleString('en-IN', {maximumFractionDigits: 0});
            document.getElementById('expectedValue').textContent = '‚Çπ' + expectedValue.toLocaleString('en-IN', {maximumFractionDigits: 0});
            document.getElementById('netProfit').textContent = '‚Çπ' + netProfit.toLocaleString('en-IN', {maximumFractionDigits: 0});
            document.getElementById('roiPercent').textContent = roiPercent.toFixed(2) + '%';
            document.getElementById('cagr').textContent = cagr.toFixed(2) + '%';
            document.getElementById('profitPerSqft').textContent = '‚Çπ' + profitPerSqft.toLocaleString('en-IN', {maximumFractionDigits: 0});
            
            if (netProfit > 0) {
                document.getElementById('netProfit').parentElement.classList.add('positive');
                document.getElementById('netProfit').parentElement.classList.remove('negative');
            } else {
                document.getElementById('netProfit').parentElement.classList.add('negative');
                document.getElementById('netProfit').parentElement.classList.remove('positive');
            }
            
            const performanceScore = Math.min(100, Math.max(0, (roiPercent / 2)));
            document.getElementById('performanceScore').style.width = performanceScore + '%';
            document.getElementById('performanceScore').textContent = performanceScore.toFixed(0) + '%';
            
            const pros = [];
            const cons = [];
            
            if (cagr > 15) pros.push('Excellent CAGR above 15% - Strong wealth creation potential');
            if (metroProximity > 1.1) pros.push('Metro/Expressway connectivity boosts long-term value');
            if (docGrade >= 1.05) pros.push('Grade A documentation ensures smooth resale and premium pricing');
            if (infrastructureMultiplier > 1.2) pros.push('High infrastructure development score indicates rapid appreciation');
            if (roiPercent > 100) pros.push('ROI exceeds 100% - Exceptional investment opportunity');
            if (bankApproved > 1) pros.push('Bank loan approved property - Higher liquidity and buyer confidence');
            
            if (cagr < 8) cons.push('CAGR below 8% - Consider alternative investments');
            if (loanTaken) cons.push('Loan burden reduces effective returns - Monitor EMI impact');
            if (infraDelayRisk < 1) cons.push('Infrastructure delay risk may impact growth projections');
            if (docGrade < 1) cons.push('Documentation issues may reduce resale value and buyer interest');
            if (holdingPeriod > 10) cons.push('Long holding period increases market uncertainty');
            if (nocStatus < 1) cons.push('Missing NOCs can create legal complications and reduce value');
            
            while (pros.length < 3) pros.push('Stable real estate asset for portfolio diversification');
            while (cons.length < 3) cons.push('Market volatility may affect short-term valuations');
            
            document.getElementById('proslist').innerHTML = pros.slice(0, 3).map(p => '<li>' + p + '</li>').join('');
            document.getElementById('conslist').innerHTML = cons.slice(0, 3).map(c => '<li>' + c + '</li>').join('');
            
            let buyScore = 50;
            if (cagr > 15) buyScore += 15;
            else if (cagr > 12) buyScore += 10;
            else if (cagr > 8) buyScore += 5;
            else buyScore -= 10;
            
            if (infrastructureMultiplier > 1.3) buyScore += 15;
            else if (infrastructureMultiplier > 1.15) buyScore += 10;
            else if (infrastructureMultiplier > 1) buyScore += 5;
            
            if (legalMultiplier > 1.1) buyScore += 10;
            else if (legalMultiplier < 0.95) buyScore -= 10;
            
            if (roiPercent > 150) buyScore += 10;
            else if (roiPercent < 50) buyScore -= 10;
            
            buyScore = Math.min(100, Math.max(0, buyScore));
            
            document.getElementById('bestBuyScore').textContent = buyScore.toFixed(0) + '/100';
            
            let scoreInsight = '';
            if (buyScore >= 80) scoreInsight = 'üåü Exceptional Investment! This plot shows outstanding potential with strong fundamentals and excellent growth prospects.';
            else if (buyScore >= 65) scoreInsight = '‚úÖ Good Investment. Solid fundamentals with reasonable growth expectations. Proceed with confidence.';
            else if (buyScore >= 50) scoreInsight = '‚ö†Ô∏è Average Investment. Consider negotiating better terms or exploring alternative options in the area.';
            else scoreInsight = '‚ùå Below Average. Significant concerns identified. Strongly recommend reconsidering or seeking professional advice.';
            
            document.getElementById('scoreInsight').textContent = scoreInsight;
            
            const worstCaseValue = purchasePrice * 0.8 * 0.9;
            const quickSaleDiscount = parseFloat(document.getElementById('quickSaleDiscount').value) || 10;
            const distressSaleValue = worstCaseValue * (1 - quickSaleDiscount / 100);
            const worstCasePosition = distressSaleValue - totalInvestment - (totalInvestment * 0.05);
            
            document.getElementById('worstCase').textContent = '‚Çπ' + worstCasePosition.toLocaleString('en-IN', {maximumFractionDigits: 0});
            document.getElementById('worstCase').style.color = worstCasePosition >= 0 ? '#27ae60' : '#dc3545';
            
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('resultsSection').scrollIntoView({behavior: 'smooth', block: 'start'});
        }
        
        window.onload = function() {
            toggleLoanFields();
            toggleConstructionFields();
        };
    </script>
</body>
</html>
